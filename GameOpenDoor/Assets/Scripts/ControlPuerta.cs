using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class ControlPuerta : MonoBehaviour
{
    
    public GameObject myDoor; // Para buscar el Game Object que es mi puerto
    public Animator myAnimatorDoor; //Para guardor la animacion de mi puerta
    public Animator myAnimatorPlayer; // Para buscar el la animacion de mi Player



    // Start is called before the first frame update
    void Start()
    {
        myDoor = GameObject.Find("Door");  //Busco mi puerta
        myAnimatorDoor = myDoor.GetComponent<Animator>(); //busco el animador de mi puerta
        myAnimatorPlayer = this.gameObject.GetComponent<Animator>(); //busco el animador de mi player
        myAnimatorPlayer.enabled = false; //Descativo el animador para poder mover mi player sin que cree conflicto con la animacion
        
        
    }

  

    private void OnTriggerStay(Collider other) // cuando entro en collision  con el area donde puedo habilitar la animacion de puerta
    {
        if(other.gameObject.name == "DoorArea") //si collision con el Door Area
        {
            openDR(); //Llamo mi funcion abirir puerta
        }
    }
    void openDR()
    {

        myAnimatorPlayer.enabled = true; //activo el animator de player
        if (Input.GetKeyDown(KeyCode.T))  //cuando preciono T
        {
            
            myAnimatorDoor.SetBool("toOpenDoor", true); //ejecuto primero la animacion de la puerta
            myAnimatorPlayer.SetBool("GotoTarget", true); //ejecuto la animacion del player
            
        }

    }
   
}
